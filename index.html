<!DOCTYPE HTML>
<!--
	Identity by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>EmPushy</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/landing.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
        
        <script src="https://www.gstatic.com/firebasejs/ui/4.3.0/firebase-ui-auth.js"></script>
        <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.3.0/firebase-ui-auth.css" />
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<section id="main" style="background-color: transparent">
						<header>
							<span><img src="images/empushy_white_no_caption.png" alt="" style="width: 100%;"/></span>
						</header>
                        <div id="firebaseui-auth-container"></div>
						<footer style="color: white; padding: 2%;">
							<small>No account yet? <br>Enter your email above to get started!</small>
						</footer>
					</section>

				<!-- Footer -->
					<footer id="footer">
						<ul class="copyright">
							<li>&copy; EmPushy</li><li>Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a></li>
						</ul>
					</footer>

			</div>

		<!-- Scripts -->
            <script
              src="https://code.jquery.com/jquery-3.4.1.min.js"
              integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
              crossorigin="anonymous"></script>
            <!-- The core Firebase JS SDK is always required and must be listed first -->
            <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-app.js"></script>
            <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-auth.js"></script>
        
			<script>
                // Your web app's Firebase configuration
                var firebaseConfig = {
                    apiKey: "AIzaSyBJpTtm__4p2TRQnBs71PG5u0odryHPxqs",
                    authDomain: "autoempushy.firebaseapp.com",
                    databaseURL: "https://autoempushy.firebaseio.com",
                    projectId: "autoempushy",
                    storageBucket: "autoempushy.appspot.com",
                    messagingSenderId: "787581605206",
                    appId: "1:787581605206:web:5cc765820a98b8008d32f7",
                    measurementId: "G-NWVD0JG36T"
                };
                // Initialize Firebase
                firebase.initializeApp(firebaseConfig);
                
				if ('addEventListener' in window) {
					window.addEventListener('load', function() { document.body.className = document.body.className.replace(/\bis-preload\b/, ''); });
					document.body.className += (navigator.userAgent.match(/(MSIE|rv:11\.0)/) ? ' is-ie' : '');
				}

                window.addEventListener('load', function() {
                    initApp();
                });
                
                function setupLogin(){
                    var uiConfig = {
                        signInSuccessUrl: '/profile.html',
                        signInOptions: [
                            // Leave the lines as is for the providers you want to offer your users.
                            {
                                provider: "password",  /*EmailAuthProvider*/
                                requireDisplayName: false
                            }
                        ],
                        credentialHelper: firebaseui.auth.CredentialHelper.NONE,
                        // tosUrl and privacyPolicyUrl accept either url string or a callback
                        // function.
                        // Terms of service url/callback.
                        tosUrl: '/',
                        // Privacy policy url/callback.
                        privacyPolicyUrl: function() {
                          window.location.assign('/');
                        }
                    };

                    // Initialize the FirebaseUI Widget using Firebase.
                    var ui = new firebaseui.auth.AuthUI(firebase.auth());
                    // The start method will wait until the DOM is loaded.
                    ui.start('#firebaseui-auth-container', uiConfig)
                    
                    
                }
                function initApp() {
                    firebase.auth().onAuthStateChanged(function(user) {
                        if (user) {
                            // User is signed in.
                            var email = user.email;
                            var uid = user.uid;
                            localStorage.setItem('userId', uid);
                            
                            window.location.replace("/profile.html");
                        } else {
                            // User is signed out.
                            setupLogin();
                        }
                    }, function(error) {
                      console.log(error);
                    });
                }
                
                
			</script>

	</body>
</html>