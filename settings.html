<!DOCTYPE HTML>
<!--
	Identity by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>pushd</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/insights.css" />
        <link rel="icon" type="image/png" href="images/favicon.png" sizes="32x32">
		<link rel="stylesheet" href="assets/css/ant-toast.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
        
        <style>
            .edit-icon {
                opacity: 40%;
                color: #cc796b;
                cursor: pointer;
                float: right;
                margin: auto;
                line-height: 1.5;
                font-style: oblique;
                font-size: x-large;
            }
            
            .field {
                margin-top: 2%;  
                margin-bottom: 2%; 
            }
            
            .hidden {
                display: none!important;
            }
        </style>
        <!-- Facebook Pixel Code -->
        <script>
          !function(f,b,e,v,n,t,s)
          {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
          n.callMethod.apply(n,arguments):n.queue.push(arguments)};
          if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
          n.queue=[];t=b.createElement(e);t.async=!0;
          t.src=v;s=b.getElementsByTagName(e)[0];
          s.parentNode.insertBefore(t,s)}(window, document,'script',
          'https://connect.facebook.net/en_US/fbevents.js');
          fbq('init', '1273450106174621');
          fbq('track', 'PageView');
        </script>
        <noscript><img height="1" width="1" style="display:none"
          src="https://www.facebook.com/tr?id=1273450106174621&ev=PageView&noscript=1"
        /></noscript>
        <!-- End Facebook Pixel Code -->
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
                    <img src="images/pushd_white_no_caption_2.0.png" style="width: 200px; cursor: pointer;" onclick="window.location.replace('/login.html')"/>
                    
                    <section id="main" style="background: white; text-align: center;">
                        <h1>Settings</h1>
                        <br>
                        <div style="display: flex; justify-content: left; align-items: center; margin-bottom: 5%;">
                            <p id="tagline" style="margin-bottom: 0px; margin-right: 5%;">Permanently delete all my notifications</p>
                            <button style="margin-left: auto; min-width: 55%;" onclick="confirmedAction('notifications')">Delete Notifications</button>
                        </div>
                        <div style="display: flex; justify-content: left; align-items: center; margin-bottom: 5%;">
                            <p id="tagline" style="margin-bottom: 0px; margin-right: 5%;">Permanently delete all my metrics</p>
                            <button style="margin-left: auto; min-width: 55%;" onclick="confirmedAction('metrics')">Delete Metrics</button>
                        </div>
                        <div style="display: flex; justify-content: left; align-items: center; margin-bottom: 5%;">
                            <p id="tagline" style="margin-bottom: 0px; margin-right: 5%;">Permanently delete my account</p>
                            <button style="margin-left: auto; min-width: 55%;" onclick="confirmedAction('account')">Delete Account</button>
                        </div>
                    </section>
                    

				<!-- Footer -->
					<footer id="footer">
						<ul class="copyright">
							<li>&copy; Pushd</li>
                            <li><a href="/terms.html" target="_blank">Terms &amp; Conditions</a></li>
                            <li><a href="/privacy.html" target="_blank">Privacy Policy</a></li>
                            <li><a href="/cookies.html" target="_blank">Cookie Policy</a></li>
                            <li><a href="/contact.html">Contact</a></li>
                            <li>Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a></li>
						</ul>
					</footer>

			</div>

		<!-- Scripts -->
        <script
          src="https://code.jquery.com/jquery-3.4.1.min.js"
          integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
          crossorigin="anonymous"></script>
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-database.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jsrender/1.0.4/jsrender.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
        <script src="assets/js/ant-toast.js"></script>
        
        <script type="application/javascript" src="assets/js/test.js"></script>
        <script>

            // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyBJpTtm__4p2TRQnBs71PG5u0odryHPxqs",
                authDomain: "autoempushy.firebaseapp.com",
                databaseURL: "https://autoempushy.firebaseio.com",
                projectId: "autoempushy",
                storageBucket: "autoempushy.appspot.com",
                messagingSenderId: "787581605206",
                appId: "1:787581605206:web:5cc765820a98b8008d32f7",
                measurementId: "G-NWVD0JG36T"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            var db = firebase.database();

            if ('addEventListener' in window) {
                window.addEventListener('load', function() { document.body.className = document.body.className.replace(/\bis-preload\b/, ''); });
                document.body.className += (navigator.userAgent.match(/(MSIE|rv:11\.0)/) ? ' is-ie' : '');
            }

            window.addEventListener('load', function() {
                initApp();
            });

            function initApp() {    
                firebase.auth().onAuthStateChanged(function(user) {
                    if (user) {
                        var uid = user.uid;
                    }
                    else {
                        
                    }
                }, function(error) {
                  console.log(error);
                });
            }  
            
            function confirmedAction(action){
                
                switch(action){
                    case 'notifications': 
                        url = 'https://autoempushy.herokuapp.com/v1/delete-notifications'
                        successMessage = 'Successfully deleted all notifications'
                        redirect = false
                        break
                    case 'metrics': 
                        url = 'https://autoempushy.herokuapp.com/v1/delete-metrics'
                        successMessage = 'Successfully deleted all metrics'
                        redirect = false
                        break
                    case 'account': 
                        url = 'https://autoempushy.herokuapp.com/v1/delete-account'
                        successMessage = 'Successfully deleted your account'
                        redirect = true
                        break
                }
                
                uid = localStorage.getItem('userId')
                if(uid!=null){
                    console.log(uid)
                    var formData = JSON.stringify({
                        'userId': uid
                    })

                    $.ajax ({
                        url: url,
                        type: "POST",
                        data: formData,
                        dataType: "json",
                        contentType: "application/json; charset=utf-8",
                        crossDomain: true,
                        success: function(data) {
                            try{
                               if(data['success']){
                                   Message.default.success(successMessage)
                                   if(redirect){
                                        localStorage.clear();
                                        firebase.auth().signOut();
                                        window.location.replace("/index.html");
                                   }
                               }
                                else{
                                    Message.default.error('Could not complete request. Try again later.')
                                }
                            }
                            catch(err){}
                        },
                        error: function(XMLHttpRequest, textStatus, errorThrown) { 
                            Message.default.error('Could not complete request. Try again later.')
                        } 
                    });
                } 
            }

        </script>

	</body>
</html>